<button mat-icon-button [color]="currentPlaybackDeviceId === currentDevice?.id ? 'primary' : 'accent'"
  [disabled]="devices.length === 0 || !currentDevice"
  [matMenuTriggerFor]="switchDeviceContextMenu">
  <mat-icon>computer</mat-icon>
</button>

<mat-menu #switchDeviceContextMenu="matMenu">
  @for (device of devices; track device) {
    <button mat-menu-item
      (click)="requestPlayback(device)"
      >
      <mat-icon [color]="device.id === currentPlaybackDeviceId ? 'accent' : 'primary'" >{{ device.icon }}</mat-icon>
      @if (device.id === currentDevice?.id) {
        <span>Current Device</span>
      } @else {
        <span>{{ device.displayName }}</span>
      }
    </button>
  }
</mat-menu>
